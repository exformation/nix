#!/usr/bin/env bash

# Function to search GitHub and return the first result URL
search_github() {
    query="$1"
    search_url="https://api.github.com/search/repositories?q=$query&sort=stars&order=desc"
    curl -s "$search_url" | jq -r '.items[0].html_url'
}

# Using rofi to get user input
query=$(rofi -dmenu -p "GitHub Search:")

# Check if query is empty
if [ -z "$query" ]; then
    exit 1
fi

# Perform the search
url=$(search_github "$query")

# Check if URL is empty
if [ -z "$url" ]; then
    rofi -e "No results found."
    exit 1
fi

# Open the URL in the default browser
xdg-open "$url"
