import{_ as O,a as S}from"./Footer.7deff4d2.js";import{_ as z}from"./HeroMeta.42ee92be.js";import{u as J,_ as K}from"./Blocks.48298b45.js";import{_ as Q}from"./List.6bd4aace.js";import{_ as U,a as W}from"./ResearchPublications.6c41365f.js";import{s as X,u as Y,_ as Z}from"./useHeadSeo.01f728f7.js";import{h as L,B as tt,f as et,w as ot,g as it,o as _,i as h,j as nt,b as e,a as f,p as at,q as st,m as k}from"./entry.660bfa6d.js";import{u as lt,b as mt}from"./usePageTransition.7fcccf25.js";import{u as I}from"./usePreviewToken.ae6e917b.js";import{u as ct}from"./useErrorPage.0c256b6a.js";import"./BlockTimedTabs.vue.e6371e9a.js";import"./Listing.1acd6aa6.js";import"./slugify.068b7bc9.js";import"./useResourceIndexData.ef84c0a0.js";import"./usePageLoading.cf51f418.js";import"./lang.4a9029fb.js";function rt(t){var m,c,r,g,p,o,d,i;const{$helpers:a}=L(),l=(m=t.tags)==null?void 0:m.map(n=>({text:n.title,url:a.route(n,{context:"blog-details"})})),s={assetType:(c=t.hero)==null?void 0:c.assetType,intro:t.descriptionHtml,introRichText:t.descriptionRichText,links:a.heroLinks(t),title:((r=t.hero)==null?void 0:r.title)??t.title};return t.hero.assetType==="image"&&(s.image=((g=t.media.heroImage)==null?void 0:g.length)&&t.media.heroImage[0]["full-width"]),t.hero.assetType==="image-small"&&(s.image=((p=t.media.heroImage)==null?void 0:p.length)&&t.media.heroImage[0]["half-width"]),{authors:(o=t.authors)==null?void 0:o.map(n=>({fullname:n.fullname,description:n.description,image:a.media.imageByRole(n,"cover","default"),link:{text:"View all articles",url:a.route(n,{context:tt})}})),acknowledgments:t.acknowledgments,blocks:(d=t.blocks)==null?void 0:d.default,colorTheme:t.colorTheme,description:t.descriptionHtml,descriptionRichText:t.descriptionRichText,hero:s,meta:{authors:(i=t.authors)==null?void 0:i.map(n=>({name:n.fullname})),date:t.publicationDateFormatted,links:t.researchPublicationLinks,tags:l},publicationDate:t.publicationDate,publicationDateFormatted:t.publicationDateFormatted,seo:t.seo,title:t.title,tags:l,citations:[...t.footnotes,...t.references]}}const $t={__name:"[slug]",async setup(t){var n,y;let a,l;const{$twill:s}=L(),m=et(),{footnotes:c,references:r,setCitations:g}=J(),p=lt(),{data:o,error:d}=([a,l]=ot(()=>mt(`blog-detail-${m.params.slug}`,()=>{const u=s.find("blog-details").filter({slug:m.params.slug});return I().value&&u.query("preview",I().value),u.fetch()},{transform:u=>s.transform(u).pop()})),a=await a,l(),a);ct({data:o,error:d});const i=rt(o==null?void 0:o.value);return it(()=>{X(o==null?void 0:o.value)}),g(i.citations),Y({title:(n=o==null?void 0:o.value)==null?void 0:n.title,seo:(y=o==null?void 0:o.value)==null?void 0:y.seo}),(u,pt)=>{const N=O,G=S,V=z,j=K,b=Q,T=U,E=W,M=Z;return _(),h(M,{id:`${e(o).type}-${e(o).slug}`},{default:nt(()=>{var x,v,w,R,D,B,$,C,P,q,A,F;return[f(N,{navigation:(x=e(p))==null?void 0:x.header,quicklinks:((v=e(p))==null?void 0:v.quicklinks)||[],theme:(w=e(i))==null?void 0:w.colorTheme},null,8,["navigation","quicklinks","theme"]),f(G,{name:"BlogDetail",image:(R=e(i))==null?void 0:R.hero.image,intro:(D=e(i))==null?void 0:D.hero.intro,introRichText:(B=e(i))==null?void 0:B.hero.introRichText,links:($=e(i))==null?void 0:$.hero.links,template:(C=e(i))==null?void 0:C.hero.assetType,title:(P=e(i))==null?void 0:P.hero.title,theme:(q=e(i))==null?void 0:q.colorTheme},null,8,["image","intro","introRichText","links","template","title","theme"]),f(V,at(st((A=e(i))==null?void 0:A.meta)),null,16),f(j,{blocks:(F=e(i))==null?void 0:F.blocks,modifier:"secondary"},null,8,["blocks"]),e(c).length?(_(),h(b,{key:0,title:"Footnotes",list:e(c),counterType:"alphabet",listType:"footnotes"},null,8,["list"])):k("",!0),e(r).length?(_(),h(b,{key:1,title:"References",list:e(r),listType:"references"},null,8,["list"])):k("",!0),e(i).authors&&e(i).authors.length?(_(),h(T,{key:2,title:"Authors",authors:e(i).authors},null,8,["authors"])):k("",!0),Object.values(e(i).acknowledgments).every(H=>H===null||H==="")?k("",!0):(_(),h(T,{key:3,title:"Acknowledgments",content:e(i).acknowledgments},null,8,["content"])),f(E,{topics:e(o).topics},null,8,["topics"])]}),_:1},8,["id"])}}};export{$t as default};
